<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>The Nook — Grand Library</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Crimson+Text&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #f6f1e7;
  --ink: #1c0f12;
  --gold: #c9a44c;
  --wood: #6b4228;
  --wood-dark: #3b2316;
  --book-red: #6b2b34;
}

/* RESET */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: radial-gradient(circle at top, #fffaf3, #e9e1d4);
  font-family: 'Crimson Text', serif;
  color: var(--ink);
  padding: 40px;
}

/* NAV */
nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 50px;
}

.logo {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  cursor: pointer;
}

nav button {
  padding: 8px 14px;
  background: var(--gold);
  border: none;
  cursor: pointer;
}

/* HEADER */
header {
  text-align: center;
  margin-bottom: 80px;
}

header h1 {
  font-family: 'Playfair Display', serif;
  font-size: 3rem;
  letter-spacing: 0.15em;
}

/* SECTIONS */
.shelf-section {
  margin-bottom: 90px;
}

.shelf-title {
  text-align: center;
  font-family: 'Playfair Display', serif;
  letter-spacing: 0.3em;
  margin-bottom: 35px;
  color: var(--gold);
}

/* SHELF */
.shelf {
  background: linear-gradient(to bottom, var(--wood), var(--wood-dark));
  height: 30px;
  display: flex;
  gap: 16px;
  padding: 0 18px;
  align-items: flex-end;
  border-radius: 4px;
  box-shadow: 0 15px 25px rgba(0,0,0,0.4);
}

/* BOOK */
.book {
  width: 54px;
  height: 210px;
  background: linear-gradient(180deg, #7a2e3a, #4b1820);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  margin-bottom: 28px;
  transition: transform 0.3s;
}

.book span {
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  font-family: 'Playfair Display', serif;
  font-size: 0.9rem;
  color: #f6f1e7;
}

.book:hover {
  transform: translateY(-8px);
}

.book.finished {
  background: linear-gradient(180deg, #c9a44c, #8c6b2e);
}

/* MODALS */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  align-items: center;
  justify-content: center;
}

.modal-content {
  background: #fffaf3;
  padding: 30px;
  width: 340px;
  border-radius: 6px;
}

.modal-content input,
.modal-content textarea {
  width: 100%;
  margin-bottom: 10px;
}

/* ANALYTICS */
.analytics {
  margin-top: 80px;
  text-align: center;
  font-family: 'Playfair Display', serif;
}

.analytics span {
  display: block;
  margin-top: 10px;
}
</style>
</head>

<body>

<nav>
  <div class="logo" onclick="location.href='index.html'">The Nook</div>
  <button onclick="openAdd()">+ Add Book</button>
</nav>

<header>
  <h1>The Library</h1>
  <p>A sanctuary of bound memories</p>
</header>

<section class="shelf-section">
  <div class="shelf-title">TO BE READ</div>
  <div class="shelf" id="tbr"></div>
</section>

<section class="shelf-section">
  <div class="shelf-title">CURRENTLY READING</div>
  <div class="shelf" id="current"></div>
</section>

<section class="shelf-section">
  <div class="shelf-title">FINISHED</div>
  <div class="shelf" id="finished"></div>
</section>

<div class="analytics">
  <span>Total Books: <b id="totalBooks">0</b></span>
  <span>Finished Books: <b id="finishedBooks">0</b></span>
</div>

<!-- ADD BOOK MODAL -->
<div class="modal" id="addModal">
  <div class="modal-content">
    <h3>Add Book</h3>
    <input id="title" placeholder="Title">
    <input id="author" placeholder="Author">
    <input id="moods" placeholder="Moods (comma separated)">
    <input type="number" id="rating" min="1" max="5" placeholder="Rating (1-5)">
    <textarea id="review" placeholder="Review"></textarea>
    <button onclick="addBook()">Add</button>
    <button onclick="closeAdd()">Cancel</button>
  </div>
</div>

<!-- DETAILS MODAL -->
<div class="modal" id="detailsModal">
  <div class="modal-content">
    <h3 id="dTitle"></h3>
    <p><b>Author:</b> <span id="dAuthor"></span></p>
    <p><b>Moods:</b> <span id="dMoods"></span></p>
    <p><b>Rating:</b> <span id="dRating"></span></p>
    <p id="dReview"></p>
    <button onclick="closeDetails()">Close</button>
  </div>
</div>

<script>
let books = [];
let dragId = null;

function render() {
  ['tbr','current','finished'].forEach(id => document.getElementById(id).innerHTML = '');

  books.forEach(b => {
    const el = document.createElement('div');
    el.className = 'book' + (b.status === 'finished' ? ' finished' : '');
    el.draggable = true;
    el.ondragstart = e => dragId = b.id;
    el.onclick = () => showDetails(b.id);
    el.innerHTML = `<span>${b.title}</span>`;
    document.getElementById(b.status).appendChild(el);
  });

  document.getElementById('totalBooks').textContent = books.length;
  document.getElementById('finishedBooks').textContent =
    books.filter(b => b.status === 'finished').length;
}

['tbr','current','finished'].forEach(zone => {
  const el = document.getElementById(zone);
  el.ondragover = e => e.preventDefault();
  el.ondrop = () => {
    const book = books.find(b => b.id === dragId);
    book.status = zone;
    render();
  };
});

function openAdd() {
  document.getElementById('addModal').style.display = 'flex';
}
function closeAdd() {
  document.getElementById('addModal').style.display = 'none';
}

function addBook() {
  books.push({
    id: Date.now(),
    title: title.value,
    author: author.value,
    moods: moods.value.split(','),
    rating: rating.value,
    review: review.value,
    status: 'tbr'
  });
  closeAdd();
  render();
}

function showDetails(id) {
  const b = books.find(x => x.id === id);
  dTitle.textContent = b.title;
  dAuthor.textContent = b.author;
  dMoods.textContent = b.moods.join(', ');
  dRating.textContent = '★'.repeat(b.rating);
  dReview.textContent = b.review;
  document.getElementById('detailsModal').style.display = 'flex';
}

function closeDetails() {
  document.getElementById('detailsModal').style.display = 'none';
}
</script>

</body>
</html>
