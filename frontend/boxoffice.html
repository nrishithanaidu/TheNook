<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>The Nook Cinema — Box Office</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet" />

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

    <style>
        :root {
            --bg-deep: #050508;
            --bg-panel: #12050a;
            --bg-panel-alt: #1b060b;
            --red-deep: #2b0508;
            --red-main: #4d080c;
            --red-light: #7c1118; 
            --gold: #ffc857;
            --gold-soft: #ffdf99;
            --text-main: #f8e9d9;
            --text-muted: #c7b3a1;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: "EB Garamond", serif;
            background: radial-gradient(circle at top, #111018 0, #050508 45%, #000 100%);
            color: var(--text-main);
            overflow-x: hidden;
        }

        .page-wrap {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 16px 80px;
            opacity: 0;
            transition: opacity 1s ease-in;
        }
        .page-wrap.visible { opacity: 1; }

        /* ---------- Marquee Header ---------- */
        .bo-header-outer {
            margin-top: 8px;
            padding: 18px;
            border-radius: 22px;
            border: 2px solid rgba(255, 200, 87, 0.9);
            background: radial-gradient(circle at top, rgba(255,255,255,0.06) 0, transparent 55%),
                        radial-gradient(circle at bottom, rgba(255, 200, 87, 0.3) 0, transparent 60%);
            box-shadow: 0 0 10px rgba(255, 200, 87, 0.8), 0 0 20px rgba(255, 200, 87, 0.6);
            position: relative;
            animation: pulseGlow 2.5s infinite ease-in-out alternate;
        }

        @keyframes pulseGlow {
            0% { box-shadow: 0 0 10px rgba(255, 200, 87, 0.8), 0 0 20px rgba(255, 200, 87, 0.6); }
            100% { box-shadow: 0 0 15px var(--gold-soft), 0 0 25px var(--gold); }
        }

        .bo-header-inner {
            border-radius: 16px;
            padding: 24px 32px 26px;
            text-align: center;
            background: linear-gradient(180deg, var(--red-light) 0%, var(--red-main) 52%, var(--red-deep) 100%);
            box-shadow: inset 0 0 40px rgba(0,0,0,0.8);
        }

        .bo-title {
            font-family: "Cinzel", serif;
            font-size: clamp(32px, 4vw, 44px);
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--gold);
        }

        /* --- Cinematic Opening --- */
        #curtain-overlay {
            position: fixed; inset: 0;
            background-color: var(--bg-deep);
            z-index: 5000;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        .curtain {
            width: 50%; height: 100%;
            background-color: var(--red-light);
            transition: transform 1.2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            position: absolute; top: 0;
            box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.8);
        }
        #left-curtain { left: 0; border-right: 1px solid rgba(0,0,0,0.3); }
        #right-curtain { right: 0; border-left: 1px solid rgba(0,0,0,0.3); }
        #left-curtain.open { transform: translateX(-100%); }
        #right-curtain.open { transform: translateX(100%); }
        #curtain-overlay.fade-out { opacity: 0; transition: opacity 0.5s 1s; pointer-events: none; }

        .action-text {
            font-size: 8vw; color: var(--gold); text-shadow: 0 0 20px var(--gold);
            font-family: "Cinzel", serif; z-index: 5001; transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .action-text.hidden { opacity: 0; transform: scale(1.5); }

        /* ---------- Achievements Section ---------- */
        .achievements-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .achievement-card {
            background: linear-gradient(145deg, #1b060b, #0d0205);
            border: 1px solid rgba(255, 200, 87, 0.3);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            transition: border-color 0.3s;
        }
        .achievement-card:hover { border-color: var(--gold); }
        .ach-icon {
            width: 50px; height: 50px;
            background: rgba(255, 200, 87, 0.1);
            border: 1px solid var(--gold);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: var(--gold); font-size: 20px;
        }
        .ach-info b { display: block; font-family: "Cinzel"; color: var(--gold); font-size: 18px; }
        .ach-info span { font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; }

        /* ---------- Add Film Form ---------- */
        .add-film-container {
            margin-top: 30px;
            background: rgba(18, 5, 10, 0.6);
            border: 1px dashed rgba(255, 200, 87, 0.4);
            padding: 24px;
            border-radius: 16px;
        }
        .add-film-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        .add-film-grid input, .add-film-grid select, .search-input {
            background: #000; border: 1px solid var(--red-main);
            padding: 12px; color: var(--text-main); border-radius: 8px;
            font-family: inherit; font-size: 14px; outline: none;
        }

        .btn-gold {
            background: linear-gradient(180deg, #5a090f 0%, #120104 100%);
            border: 1px solid var(--gold); color: var(--gold);
            padding: 10px 18px; border-radius: 999px; font-family: "Cinzel";
            cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-gold:hover { background: var(--gold); color: #000; }

        /* ---------- Movie Grid ---------- */
        .section { margin-top: 48px; }
        .section-banner {
            margin: 0 auto 18px; max-width: 640px; text-align: center; padding: 18px;
            border-radius: 999px; background: linear-gradient(180deg, #5a090f 0%, #120104 100%);
            border: 1px solid var(--gold);
        }
        .section-banner-title { font-family: "Cinzel"; letter-spacing: 0.2em; color: var(--gold); }

        .card-row {
            display: flex; gap: 20px; overflow-x: auto; padding: 10px 5px;
            scrollbar-width: thin; scrollbar-color: var(--red-main) transparent;
        }
        .movie-card {
            flex: 0 0 210px; background: #130308; border-radius: 18px;
            border: 2px solid rgba(255, 200, 87, 0.5); padding: 10px;
            cursor: pointer; transition: transform 0.3s, border-color 0.3s;
        }
        .movie-card:hover { transform: translateY(-8px); border-color: var(--gold); }
        .poster-wrap { border-radius: 12px; overflow: hidden; height: 280px; background: #000; }
        .poster-wrap img { width: 100%; height: 100%; object-fit: cover; }
        .card-title { margin-top: 10px; font-weight: 600; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-meta-line { font-size: 12px; color: var(--text-muted); margin-top: 4px; }

        .film-strip { width: 100%; height: 20px; margin: 40px 0; background: repeating-linear-gradient(to right, #000 0, #000 30px, var(--gold) 30px, var(--gold) 38px); }

        /* ---------- Modal ---------- */
        .modal-backdrop {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 4000; display: none; align-items: center; justify-content: center; padding: 20px;
        }
        .modal-backdrop.show { display: flex; }
        .modal-content {
            background: #1b060b; border: 2px solid var(--gold); border-radius: 24px;
            max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 40px; position: relative;
        }
        .modal-close { position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--gold); font-size: 24px; cursor: pointer; }
        .modal-flex { display: flex; gap: 30px; flex-wrap: wrap; }
        .modal-left { flex: 0 0 250px; }
        .modal-right { flex: 1; }
        .modal-left img { width: 100%; border-radius: 12px; border: 2px solid var(--gold); }
        .modal-header-title { font-family: "Cinzel"; font-size: 28px; color: var(--gold); }
        .modal-actions { margin-top: 30px; display: flex; gap: 10px; flex-wrap: wrap; padding-top: 20px; border-top: 1px solid rgba(255,200,87,0.2); }

        .btn-action {
            padding: 8px 14px; border-radius: 999px; font-size: 11px; font-family: "Cinzel";
            cursor: pointer; border: 1px solid var(--gold); background: transparent; color: var(--gold);
            transition: 0.2s; display: inline-flex; align-items: center; gap: 6px;
        }
        .btn-action:hover { background: var(--gold); color: #000; }
        .btn-danger { border-color: #ff4444; color: #ff4444; }
        .btn-danger:hover { background: #ff4444; color: #fff; }
    </style>
</head>
<body>

    <div id="curtain-overlay">
        <div id="left-curtain" class="curtain"></div>
        <div id="right-curtain" class="curtain"></div>
        <div id="action-text" class="action-text">ACTION!</div>
    </div>

    <div class="page-wrap" id="pageWrap">
        <header class="bo-header-outer">
            <div class="bo-header-inner">
                <div class="bo-title">
                    <i class="fa-solid fa-film"></i> BOX OFFICE <i class="fa-solid fa-film"></i>
                </div>
                <div class="bo-subtitle">THE NOOK CINEMA</div>
            </div>
        </header>

        <!-- Achievements Section -->
        <section class="achievements-row">
            <div class="achievement-card">
                <div class="ach-icon"><i class="fa-solid fa-clapperboard"></i></div>
                <div class="ach-info">
                    <b id="stat-films">0</b>
                    <span>Films Collected</span>
                </div>
            </div>
            <div class="achievement-card">
                <div class="ach-icon"><i class="fa-solid fa-masks-theater"></i></div>
                <div class="ach-info">
                    <b id="stat-genres">0</b>
                    <span>Genres Explored</span>
                </div>
            </div>
            <div class="achievement-card">
                <div class="ach-icon"><i class="fa-solid fa-hourglass-half"></i></div>
                <div class="ach-info">
                    <b id="stat-runtime">0 min</b>
                    <span>Total Runtime</span>
                </div>
            </div>
        </section>

        <!-- Acquire New Feature -->
        <section class="add-film-container">
            <div class="section-banner-title" style="font-size: 14px; text-align: left;"><i class="fa-solid fa-plus"></i> Acquire New Feature</div>
            <div class="add-film-grid">
                <input type="text" id="add-title" placeholder="Film Title">
                <input type="text" id="add-director" placeholder="Director">
                <input type="text" id="add-year" placeholder="Year">
                <input type="text" id="add-genre" placeholder="Genre">
                <input type="number" id="add-runtime" placeholder="Runtime (min)">
                <select id="add-status">
                    <option value="Now Showing">Now Showing</option>
                    <option value="Premiere">Premiere</option>
                    <option value="Archived">The Vault</option>
                </select>
                <input type="text" id="add-img" placeholder="Poster URL (Optional)">
                <button class="btn-gold" onclick="addNewFilm()">
                    <i class="fa-solid fa-plus"></i> Add to Library
                </button>
            </div>
        </section>

        <!-- Search -->
        <div style="margin-top: 30px;">
            <input type="text" class="search-input" id="searchInput" placeholder="Search archives..." style="width: 100%;" onkeyup="handleSearch()">
        </div>

        <!-- Rows -->
        <section class="section">
            <div class="section-banner"><div class="section-banner-title">NOW SHOWING</div></div>
            <div class="card-row" id="row-now"></div>
        </section>

        <div class="film-strip"></div>

        <section class="section">
            <div class="section-banner"><div class="section-banner-title">PREMIERES</div></div>
            <div class="card-row" id="row-prem"></div>
        </section>

        <div class="film-strip"></div>

        <section class="section">
            <div class="section-banner"><div class="section-banner-title">THE VAULT</div></div>
            <div class="card-row" id="row-vault"></div>
        </section>
    </div>

    <!-- Modal -->
    <div class="modal-backdrop" id="modalBackdrop">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div class="modal-flex">
                <div class="modal-left"><img id="m-img" src="" alt="Poster"></div>
                <div class="modal-right">
                    <div class="modal-header-title" id="m-title"></div>
                    <div class="modal-sub" id="m-sub"></div>
                    <div id="m-synopsis" style="margin: 20px 0; font-style: italic; color: var(--text-muted);"></div>
                    <div class="modal-actions">
                        <button class="btn-action" onclick="moveFilm('Now Showing')">Now Showing</button>
                        <button class="btn-action" onclick="moveFilm('Premiere')">Premiere</button>
                        <button class="btn-action" onclick="moveFilm('Archived')">The Vault</button>
                        <button class="btn-action btn-danger" onclick="deleteFilm()">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let movies = [
            { id: 1, title: "Dune: Part Two", director: "Denis Villeneuve", year: "2024", runtime: 166, status: "Now Showing", genre: "Sci-Fi", synopsis: "Paul Atreides unites with Chani and the Fremen while on a warpath of revenge.", img: "https://images.pexels.com/photos/1257860/pexels-photo-1257860.jpeg?auto=compress&cs=tinysrgb&w=600" },
            { id: 2, title: "Poor Things", director: "Yorgos Lanthimos", year: "2023", runtime: 141, status: "Now Showing", genre: "Drama", synopsis: "The incredible tale about the fantastical evolution of Bella Baxter.", img: "https://images.pexels.com/photos/6898859/pexels-photo-6898859.jpeg?auto=compress&cs=tinysrgb&w=600" },
            { id: 3, title: "Oppenheimer", director: "Christopher Nolan", year: "2023", runtime: 180, status: "Premiere", genre: "History", synopsis: "The story of American scientist J. Robert Oppenheimer.", img: "https://images.pexels.com/photos/7991373/pexels-photo-7991373.jpeg?auto=compress&cs=tinysrgb&w=600" },
            { id: 4, title: "Blade Runner 2049", director: "Denis Villeneuve", year: "2017", runtime: 164, status: "Archived", genre: "Sci-Fi", synopsis: "A discovery leads him to track down former blade runner Rick Deckard.", img: "https://images.pexels.com/photos/7991600/pexels-photo-7991600.jpeg?auto=compress&cs=tinysrgb&w=600" }
        ];

        let activeId = null;

        function updateAchievements() {
            document.getElementById('stat-films').innerText = movies.length;
            
            const genres = new Set(movies.map(m => m.genre));
            document.getElementById('stat-genres').innerText = genres.size;

            const totalTime = movies.reduce((sum, m) => sum + (parseInt(m.runtime) || 0), 0);
            document.getElementById('stat-runtime').innerText = `${totalTime} min`;
        }

        function renderMovies() {
            const rows = { 'Now Showing': 'row-now', 'Premiere': 'row-prem', 'Archived': 'row-vault' };
            Object.values(rows).forEach(id => document.getElementById(id).innerHTML = "");

            movies.forEach(m => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.onclick = () => openModal(m.id);
                card.innerHTML = `
                    <div class="poster-wrap"><img src="${m.img || 'https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=600'}" alt=""></div>
                    <div class="card-title">${m.title}</div>
                    <div class="card-meta-line">${m.year} • ${m.genre}</div>
                `;
                document.getElementById(rows[m.status]).appendChild(card);
            });
            updateAchievements();
        }

        function addNewFilm() {
            const title = document.getElementById('add-title').value;
            if (!title) return;
            movies.push({
                id: Date.now(),
                title,
                director: document.getElementById('add-director').value || "Unknown",
                year: document.getElementById('add-year').value || "2024",
                genre: document.getElementById('add-genre').value || "Cinema",
                runtime: document.getElementById('add-runtime').value || 0,
                status: document.getElementById('add-status').value,
                img: document.getElementById('add-img').value,
                synopsis: "New feature added to the library."
            });
            renderMovies();
            document.querySelectorAll('.add-film-grid input').forEach(i => i.value = "");
        }

        function openModal(id) {
            activeId = id;
            const m = movies.find(x => x.id === id);
            document.getElementById('m-title').innerText = m.title;
            document.getElementById('m-sub').innerText = `${m.director} • ${m.year} • ${m.genre} • ${m.runtime} min`;
            document.getElementById('m-synopsis').innerText = m.synopsis;
            document.getElementById('m-img').src = m.img || 'https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=600';
            document.getElementById('modalBackdrop').classList.add('show');
        }

        function closeModal() { document.getElementById('modalBackdrop').classList.remove('show'); }

        function moveFilm(stat) {
            const m = movies.find(x => x.id === activeId);
            if (m) m.status = stat;
            renderMovies();
            closeModal();
        }

        function deleteFilm() {
            movies = movies.filter(x => x.id !== activeId);
            renderMovies();
            closeModal();
        }

        function handleSearch() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.movie-card').forEach(card => {
                const text = card.innerText.toLowerCase();
                card.style.display = text.includes(q) ? "block" : "none";
            });
        }

        window.onload = () => {
            renderMovies();
            setTimeout(() => {
                document.getElementById('action-text').classList.add('hidden');
                setTimeout(() => {
                    document.getElementById('left-curtain').classList.add('open');
                    document.getElementById('right-curtain').classList.add('open');
                    document.getElementById('curtain-overlay').classList.add('fade-out');
                    document.getElementById('pageWrap').classList.add('visible');
                }, 400);
            }, 800);
        };
    </script>
</body>
</html>